---
title: "SS156 Final Code"
output: html_document
date: '2023-04-16'
---
```{r}
install.packages("Synth")
library(Synth)
```


```{r}
data <- read.csv("https://docs.google.com/spreadsheets/d/e/2PACX-1vR4WXnBGhkJZW8aBc6NM4fHGtoByhbLy_oSeFLW0Mm4K3CpBe_CQqf6JkxqtyxOzBZyQE0uP-fvL6dq/pub?gid=0&single=true&output=csv")

#data$country <- as.character(data$country)
#data$unemployment <- as.numeric(data$unemployment_rate)
head(data)

```

```{r}
treated_unit <- "UK"
control_units <- c("Ireland", "New Zealand", "Switzerland", "France", "Belgium", "Netherlands", "Spain", "Japan", "Mexico","Algeria")

dataprep.out <-
    dataprep(foo = data,
             predictors = c("unemployment_rate" , "population" , "inflation", "democarcy_level", "total_inland_transport_infrastructure_investment_per_GDP", "percentage_of_tourism", "net_fdi$"),
             predictors.op = "mean",
             time.predictors.prior = 2000:2015 ,
             dependent = "gdp$",
             unit.variable = "id",
             unit.names.variable = "country",
             time.variable = "year",
             treatment.identifier = treated_unit,
             controls.identifier = control_units,
             time.optimize.ssr = 2000:2015,
             time.plot = 2000:2015)
```

```{r}
synth.out <- synth(data.prep.obj = dataprep.out)
synth.tables <- synth.tab(dataprep.res = dataprep.out,
                          synth.res = synth.out
)
synth.tables$tab.w[1:14, ]
```


```{r}
synth.tables$tab.pred[1:3, ]
```

```{r}
path.plot(synth.res = synth.out,
          dataprep.res = dataprep.out,
          Ylab = "GDP per Capita",
          Xlab = "Year",
          Legend = c("UK","synthetic UK"),
          Legend.position = "bottomright"
)
gaps.plot(synth.res = synth.out,
          dataprep.res = dataprep.out,
          Ylab = "GDP",
          Xlab = "Year",
          Main = NA
)
```

